<div class="overflow-x-hidden min-h-screen bg-gray-100 bg-cover" style="background-image: url('assets/rrrr.jpg');">
  <!-- Navbar (fixe en haut) -->
  <app-navbar class="fixed top-0 left-0 w-full z-50"></app-navbar>

  <div class="flex">
      <button class="fixed top-24 z-50 bg-black/30 rounded-full p-2 backdrop-blur-sm border border-white/20 hover:bg-black/40 transition-all"
      [class.left-4]="!isSidebarVisible"
      [class.left-64]="isSidebarVisible"
      (click)="toggleSidebar()">
      <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3">
          <path [attr.d]="isSidebarVisible ? 'M15 18l-6-6 6-6' : 'M9 18l6-6-6-6'"/>
      </svg>
  </button>
      <!-- Sidebar -->
      <aside class="w-64 bg-black bg-opacity-60 shadow-2xl h-screen p-5 fixed top-16 left-0 flex flex-col items-center" [class.hidden]="!isSidebarVisible">
          <div class="text-center mt-4">
              <img src="assets/user.jpg" alt="User Image" class="w-24 h-24 rounded-full mx-auto shadow-md bg-white p-1">
              <h2 class="text-xl font-semibold mt-3 text-gray-800">Responsable</h2>
          </div>
          <nav class="mt-8 w-full bg-white bg-opacity-80 shadow-sm rounded-lg p-3 transition-all duration-300 hover:bg-gray-100">
              <ul class="space-y-2">
                  <button 
                  class="bg-blue-500 text-white w-full py-2 rounded-md mt-4 hover:bg-blue-600 transition"
                  [routerLink]="['/profil']">
                  Voir profil
                </button>
                  <li>
                      <button (click)="setActiveTab('interventions')" class="w-full flex items-center p-2 text-gray-700 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110">
                          <span class="mr-3 text-lg">üõ†</span>
                          <span class="font-medium text-sm hover:scale-110">Interventions</span>
                      </button>
                  </li>
                  <li>
                      <button (click)="setActiveTab('reclamations')" class="w-full flex items-center p-2 text-gray-700 hover:bg-gray-100 rounded-md transition-all duration-200 hover:scale-110">
                          <span class="mr-3 text-lg">‚ö†Ô∏è</span>
                          <span class="font-medium text-sm hover:scale-110">R√©clamations</span>
                      </button>
                  </li>
              </ul>
              <button 
                  class="bg-red-500 text-white w-full py-2 rounded-md mt-4 hover:bg-red-600 transition-all duration-150"
                  [routerLink]="['/login']">
                  D√©connexion
              </button>
          </nav>
      </aside>
  </div>

  <!-- Main Content -->
  <main class="flex justify-center items-start p-6 mt-20 bg-cover bg-center min-h-screen">
      <div class="bg-gray-900 bg-opacity-50 shadow-lg rounded-lg p-6 w-11/12 md:w-3/4 lg:w-1/2 custom-margin">
          <div class="bg-white shadow-md rounded-lg pt-4">
              <!-- Recherche et Filtre -->
              <div class="p-5 flex justify-between items-center">
                  <input type="text" placeholder="üîç Rechercher une r√©clamation..."
                      class="border p-3 rounded-lg w-2/3 outline-none focus:ring-2 focus:ring-white">

                  <!-- Bouton de filtre -->
                  <div class="relative ml-4">
                      <button (click)="toggleFilterDropdown()" 
                          class="bg-white text-gray-700 px-4 py-2 rounded-full w-full flex items-center justify-between shadow-sm border border-gray-300 hover:bg-gray-50 transition-all">
                          <span class="font-medium">Filtrer</span>
                          <svg [class.rotate-180]="isFilterDropdownVisible" class="w-4 h-4 transition-transform duration-200" 
                              xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                          </svg>
                      </button>
                  
                      <!-- Liste d√©roulante -->
                      <div *ngIf="isFilterDropdownVisible" 
                          class="bg-white shadow-md rounded-lg absolute top-full left-0 mt-2 w-full border border-gray-200 overflow-hidden">
                          <ul class="text-gray-700">
                              <li class="px-4 py-2 hover:bg-gray-100 transition cursor-pointer">Par Anwar</li>
                              <li class="px-4 py-2 hover:bg-gray-100 transition cursor-pointer">Par ALi</li>
                          </ul>
                      </div>
                  </div>
              </div>

              <!-- Affichage conditionnel des donn√©es -->
              <div *ngIf="activeTab === 'interventions'">
                  <div class="px-5 flex justify-between items-center">
                      <h3 class="text-2xl font-light text-gray-800 uppercase tracking-wider">
                          Liste des interventions
                      </h3>
                      
                      <button (click)="toggleInterventionStats()" 
                      class="inline-flex items-center gap-1 bg-gray-500 hover:bg-gray-500 text-white px-3 py-1 rounded-md transition-colors duration-200 text-sm">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                  </svg>
                  {{ showInterventionStats ? 'Masquer statistiques' : 'Afficher statistiques' }}
              </button>

                  </div>

                  <!-- Statistiques des interventions -->
                  <div *ngIf="showInterventionStats" class="p-5 border-t border-gray-200">
                      <h4 class="text-lg font-semibold mb-4 text-gray-700">Statistiques des interventions</h4>
                      
                      <!-- R√©partition par technicien -->
                      <div class="mb-6">
                          <h5 class="font-medium text-gray-600 mb-2">R√©partition par technicien</h5>
                          <div class="space-y-3">
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Anwar</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getTechnicianPercentage('Anwar') }}% ({{ countByTechnician('Anwar') }}/{{ interventions.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-blue-600 h-2.5 rounded-full" [style.width.%]="getTechnicianPercentage('Anwar')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Ali</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getTechnicianPercentage('Ali') }}% ({{ countByTechnician('Ali') }}/{{ interventions.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-green-600 h-2.5 rounded-full" [style.width.%]="getTechnicianPercentage('Ali')"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      
                      <!-- R√©partition par statut -->
                      <div>
                          <h5 class="font-medium text-gray-600 mb-2">R√©partition par statut</h5>
                          <div class="space-y-3">
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Termin√©</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getStatusPercentage('Termin√©') }}% ({{ countByStatus('Termin√©') }}/{{ interventions.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-green-500 h-2.5 rounded-full" [style.width.%]="getStatusPercentage('Termin√©')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">En attente</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getStatusPercentage('En attente') }}% ({{ countByStatus('En attente') }}/{{ interventions.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-yellow-500 h-2.5 rounded-full" [style.width.%]="getStatusPercentage('En attente')"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>

                  <table class="w-full border-collapse">
                      <thead>
                          <tr class="bg-gradient-to-r from-gray-500 to-gray-500 text-white text-left">
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                </svg>
                                Num√©ro d'Intervention</th>
                              <th class="p-3 text-lg items-center"> <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>Titre</th>
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>Date</th>
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                </svg>Action</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let intervention of interventions" class="border-b hover:bg-gray-100 transition">
                              <td class="p-3 text-gray-800">{{ intervention.id }}</td>
                              <td class="p-3 text-gray-800">{{ intervention.title }}</td>
                              <td class="p-3 text-gray-800">{{ intervention.date }}</td>
                              <td class="p-3 flex items-center">
                                  <button (click)="openDetails(intervention, 'interventions')" 
                                  class="text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                              Voir d√©tails
                          </button>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>

              <div *ngIf="activeTab === 'reclamations'">
                  <div class="px-5 flex justify-between items-center">
                      <h3 class="text-2xl font-light text-gray-800 uppercase tracking-wider">
                          Liste des r√©clamations
                      </h3>
                      <button (click)="toggleReclamationStats()" class="inline-flex items-center gap-1 bg-gray-500 hover:bg-gray-500 text-white px-3 py-1 rounded-md transition-colors duration-200 text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                          {{ showReclamationStats ? 'Masquer statistiques' : 'Afficher statistiques' }}
                      </button>
                  </div>

                  <!-- Statistiques des r√©clamations -->
                  <div *ngIf="showReclamationStats" class="p-5 border-t border-gray-200">
                      <h4 class="text-lg font-semibold mb-4 text-gray-700">Statistiques des r√©clamations</h4>
                      
                      <!-- R√©partition par type de probl√®me -->
                      <div class="mb-6">
                          <h5 class="font-medium text-gray-600 mb-2">R√©partition par type de probl√®me</h5>
                          <div class="space-y-3">
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Mat√©riel</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getProblemTypePercentage('Mat√©riel') }}% ({{ countByProblemType('Mat√©riel') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-purple-600 h-2.5 rounded-full" [style.width.%]="getProblemTypePercentage('Mat√©riel')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Logiciel</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getProblemTypePercentage('Logiciel') }}% ({{ countByProblemType('Logiciel') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-blue-600 h-2.5 rounded-full" [style.width.%]="getProblemTypePercentage('Logiciel')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">√âlectrique</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getProblemTypePercentage('√âlectrique') }}% ({{ countByProblemType('√âlectrique') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-red-600 h-2.5 rounded-full" [style.width.%]="getProblemTypePercentage('√âlectrique')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Divers</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getProblemTypePercentage('Divers') }}% ({{ countByProblemType('Divers') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-gray-600 h-2.5 rounded-full" [style.width.%]="getProblemTypePercentage('Divers')"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      
                      <!-- R√©partition par lieu -->
                      <div>
                          <h5 class="font-medium text-gray-600 mb-2">R√©partition par lieu</h5>
                          <div class="space-y-3">
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Laboratoire</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getLocationPercentage('Laboratoire') }}% ({{ countByLocation('Laboratoire') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-green-600 h-2.5 rounded-full" [style.width.%]="getLocationPercentage('Laboratoire')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Salle</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getLocationPercentage('Salle') }}% ({{ countByLocation('Salle') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-yellow-600 h-2.5 rounded-full" [style.width.%]="getLocationPercentage('Salle')"></div>
                                  </div>
                              </div>
                              <div>
                                  <div class="flex justify-between mb-1">
                                      <span class="text-sm font-medium text-gray-700">Bureau</span>
                                      <span class="text-sm font-medium text-gray-700">{{ getLocationPercentage('Bureau') }}% ({{ countByLocation('Bureau') }}/{{ reclamations.length }})</span>
                                  </div>
                                  <div class="w-full bg-gray-200 rounded-full h-2.5">
                                      <div class="bg-blue-600 h-2.5 rounded-full" [style.width.%]="getLocationPercentage('Bureau')"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>

                  <table class="w-full border-collapse">
                      <thead>
                          <tr class="bg-gradient-to-r from-gray-500 to-gray-500 text-white text-left">
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                </svg>Num√©ro de R√©clamation</th>
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                </svg>Titre</th>
                              <th class="p-3 text-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                </svg>Action</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let task of reclamations" class="border-b hover:bg-gray-100 transition">
                              <td class="p-3 text-gray-800">{{ task.id }}</td>
                              <td class="p-3 text-gray-800">{{ task.title }}</td>
                              <td class="p-3 flex items-center">
                                  <button (click)="openDetails(task, 'reclamations')" 
                                  class="text-blue-600 hover:text-grey-800 bg-blue-50 hover:bg-blue-100 px-3 py-1.5 rounded-md text-sm font-medium transition-colors">
                              Voir d√©tails
                          </button>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>
  </main>

  <!-- Modale Container -->
  <div *ngIf="modalVisible" class="fixed inset-0 bg-gray-900/50 backdrop-blur-sm flex items-center justify-center p-4 z-50">
      <!-- INTERVENTION Technicien ‚Üí Responsable -->
      <div *ngIf="modalType === 'interventions'" class="bg-white rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden border border-blue-100">
          <!-- En-t√™te bleu -->
          <div class="bg-gradient-to-r from-blue-600 to-blue-500 p-5 flex justify-between items-center">
              <div class="flex items-center space-x-3">
                  <div class="bg-white/20 p-2 rounded-lg">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                      </svg>
                  </div>
                  <div>
                      <h3 class="text-xl font-bold text-white">Intervention #{{modalData?.id}}</h3>
                      <p class="text-blue-100 text-sm">Technicien ‚Üí Responsable ‚Ä¢ {{modalData?.date | date:'mediumDate'}}</p>
                  </div>
              </div>
              <button (click)="closeModal()" class="text-white/80 hover:text-white">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
              </button>
          </div>
      
          <div class="p-6 space-y-6">
              <!-- M√©tadonn√©es -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <!-- Carte Technicien -->
                  <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-blue-100 text-blue-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-blue-600">TECHNICIEN</h4>
                              <p class="font-medium">{{modalData?.technicien || 'Non sp√©cifi√©'}}</p>
                          </div>
                      </div>
                  </div>
      
                  <!-- Carte Statut -->
                  <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-blue-100 text-blue-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-blue-600">STATUT</h4>
                              <span [ngClass]="{
                                  'bg-green-100 text-green-800': modalData?.statut === 'Termin√©',
                                  'bg-amber-100 text-amber-800': modalData?.statut === 'En cours',
                                  'bg-red-100 text-red-800': modalData?.statut === 'En attente'
                              }" class="px-2 py-1 rounded-full text-xs font-medium">
                                  {{modalData?.statut}}
                              </span>
                          </div>
                      </div>
                  </div>
      
                  <!-- Carte Laboratoire -->
                  <div class="bg-blue-50 rounded-xl p-4 border border-blue-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-blue-100 text-blue-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-blue-600">Lieu</h4>
                              <p class="font-medium">{{modalData?.laboratoire || 'Non sp√©cifi√©'}}</p>
                          </div>
                      </div>
                  </div>
              </div>
      
              <!-- Rapport technique -->
              <div>
                  <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                      </svg>
                      Rapport d'intervention
                  </h4>
                  <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                      <p class="whitespace-pre-line text-gray-700">{{modalData?.details}}</p>
                  </div>
              </div>
      
              <!-- Pi√®ces jointes -->
              <div *ngIf="modalData?.piecesJointes?.length">
                  <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                      </svg>
                      Documents techniques
                  </h4>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <a *ngFor="let piece of modalData.piecesJointes" href="#" class="group flex items-center space-x-3 p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-blue-300 transition-colors">
                          <div class="bg-white p-2 rounded-lg border border-gray-200 group-hover:border-blue-200">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                              </svg>
                          </div>
                          <div class="min-w-0">
                              <p class="text-sm font-medium text-gray-900 truncate">{{piece.nom}}</p>
                              <p class="text-xs text-gray-500">{{piece.taille}} ‚Ä¢ {{piece.type}}</p>
                          </div>
                      </a>
                  </div>
              </div>
      
              <!-- Actions -->
              <div class="flex justify-end space-x-3 pt-4">
                  <button (click)="closeModal()" class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                      Fermer
                  </button>
              </div>
          </div>
      </div>
      
      <!-- RECLAMATION Enseignant ‚Üí Responsable -->
      <div *ngIf="modalType === 'reclamations'" class="bg-white rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden border border-amber-100">
          <!-- En-t√™te orange -->
          <div class="bg-gradient-to-r from-amber-600 to-amber-500 p-5 flex justify-between items-center">
              <div class="flex items-center space-x-3">
                  <div class="bg-white/20 p-2 rounded-lg">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                      </svg>
                  </div>
                  <div>
                      <h3 class="text-xl font-bold text-white">R√©clamation #{{modalData?.id}}</h3>
                      <p class="text-amber-100 text-sm">Enseignant ‚Üí Responsable ‚Ä¢ {{modalData?.date | date:'mediumDate'}}</p>
                  </div>
              </div>
              <button (click)="closeModal()" class="text-white/80 hover:text-white">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
              </button>
          </div>
      
          <div class="p-6 space-y-6">
              <!-- M√©tadonn√©es -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <!-- Carte Enseignant -->
                  <div class="bg-amber-50 rounded-xl p-4 border border-amber-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-amber-100 text-amber-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-amber-600">ENSEIGNANT</h4>
                              <p class="font-medium">{{modalData?.enseignant || 'Non sp√©cifi√©'}}</p>
                          </div>
                      </div>
                  </div>
      
                  <!-- Carte Priorit√© -->
                  <div class="bg-amber-50 rounded-xl p-4 border border-amber-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-amber-100 text-amber-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-amber-600">PRIORIT√â</h4>
                              <span [ngClass]="{
                                  'bg-red-100 text-red-800': modalData?.priorite === 'Haute',
                                  'bg-amber-100 text-amber-800': modalData?.priorite === 'Moyenne',
                                  'bg-green-100 text-green-800': modalData?.priorite === 'Basse'
                              }" class="px-2 py-1 rounded-full text-xs font-medium">
                                  {{modalData?.priorite}}
                              </span>
                          </div>
                      </div>
                  </div>
      
                  <!-- Carte Laboratoire -->
                  <div class="bg-amber-50 rounded-xl p-4 border border-amber-100">
                      <div class="flex items-center space-x-3">
                          <div class="bg-amber-100 text-amber-800 p-2 rounded-full">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                              </svg>
                          </div>
                          <div>
                              <h4 class="text-xs font-medium text-amber-600">Lieu</h4>
                              <p class="font-medium">{{modalData?.laboratoire || 'Non sp√©cifi√©'}}</p>
                          </div>
                      </div>
                  </div>
              </div>
      
              <!-- D√©tails r√©clamation -->
              <div>
                  <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                      </svg>
                      D√©tails de la r√©clamation
                  </h4>
                  <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                      <p class="whitespace-pre-line text-gray-700">{{modalData?.details}}</p>
                  </div>
              </div>
      
              <!-- Pi√®ces jointes -->
              <div *ngIf="modalData?.piecesJointes?.length">
                  <h4 class="text-lg font-semibold text-gray-800 mb-3 flex items-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                      </svg>
                      Preuves jointes
                  </h4>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                      <a *ngFor="let piece of modalData.piecesJointes" href="#" class="group flex items-center space-x-3 p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-amber-300 transition-colors">
                          <div class="bg-white p-2 rounded-lg border border-gray-200 group-hover:border-amber-200">
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                              </svg>
                          </div>
                          <div class="min-w-0">
                              <p class="text-sm font-medium text-gray-900 truncate">{{piece.nom}}</p>
                              <p class="text-xs text-gray-500">{{piece.taille}} ‚Ä¢ {{piece.type}}</p>
                          </div>
                      </a>
                  </div>
              </div>
      
              <!-- Actions -->
              <div class="flex justify-end space-x-3 pt-4">
                  <button (click)="closeModal()" class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                      Fermer
                  </button>
              </div>
          </div>
      </div>
  </div>
</div>